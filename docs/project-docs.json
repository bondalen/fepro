{
  "project": {
    "metadata": {
      "name": "FEPRO",
      "version": "1.0.0",
      "description": "Federation Professionals - система управления контрагентами",
      "author": "Александр",
      "created": "2025-01-02",
      "lastUpdated": "2025-01-02",
      "status": "planning",
      "repository": "https://github.com/bondalen/fepro.git",
      "license": "MIT",
      "keywords": ["crm", "contractors", "business", "management", "federation"]
    },
    "architecture": {
      "type": "full-stack",
      "pattern": "modular-monolith",
      "backend": {
        "framework": "Spring Boot 3.4.5",
        "language": "Java 21 LTS",
        "database": "PostgreSQL 16",
        "api": "GraphQL",
        "security": "JWT + Spring Security",
        "cache": "Redis + Caffeine",
        "migrations": "Liquibase",
        "reactive": "R2DBC",
        "monitoring": "Spring Boot Actuator"
      },
      "frontend": {
        "framework": "Vue.js 3.4.21",
        "language": "TypeScript 5.4.0",
        "ui": "Quasar Framework 2.16.1",
        "graphql": "Apollo Client",
        "build": "Vite",
        "maps": "Leaflet",
        "routing": "Vue Router",
        "state": "Pinia"
      },
      "infrastructure": {
        "containerization": "Docker + Docker Compose",
        "database": "PostgreSQL 16 + PostGIS",
        "cache": "Redis",
        "monitoring": "Spring Boot Actuator",
        "ai": "MCP Servers",
        "deployment": "Docker containers"
      }
    },
    "features": {
      "core": [
        "Управление контрагентами",
        "CRM функциональность",
        "Документооборот",
        "Финансовый учет",
        "Система уведомлений",
        "Многоязычность (i18n)"
      ],
      "advanced": [
        "ГИС-аналитика контрагентов на картах",
        "Автоматическая генерация документов (PDF, Excel, CSV)",
        "WebSocket уведомления",
        "Интеграция с внешними API",
        "Система отчетности",
        "Кэширование и оптимизация"
      ],
      "integrations": [
        "Платежные системы",
        "Email/SMS сервисы",
        "Внешние CRM системы",
        "Банковские API",
        "Государственные сервисы"
      ]
    },
    "modules": [
      {
        "name": "contractor-management",
        "title": "Управление контрагентами",
        "description": "Основной модуль для работы с контрагентами",
        "priority": "critical",
        "status": "planned",
        "dependencies": ["authentication", "database"],
        "api": {
          "endpoints": [
            "POST /graphql - createContractor",
            "GET /graphql - getContractors",
            "PUT /graphql - updateContractor",
            "DELETE /graphql - deleteContractor"
          ]
        },
        "database": {
          "tables": ["contractors", "contractor_contacts", "contractor_history"],
          "relations": ["organizations", "projects", "documents"]
        }
      },
      {
        "name": "authentication",
        "title": "Аутентификация и авторизация",
        "description": "Система безопасности и управления пользователями",
        "priority": "critical",
        "status": "planned",
        "dependencies": [],
        "api": {
          "endpoints": [
            "POST /graphql - login",
            "POST /graphql - register",
            "POST /graphql - refreshToken",
            "POST /graphql - logout"
          ]
        },
        "database": {
          "tables": ["users", "roles", "permissions", "user_sessions"],
          "relations": []
        }
      },
      {
        "name": "document-management",
        "title": "Управление документами",
        "description": "Система документооборота",
        "priority": "high",
        "status": "planned",
        "dependencies": ["contractor-management", "authentication"],
        "api": {
          "endpoints": [
            "POST /graphql - createDocument",
            "GET /graphql - getDocuments",
            "PUT /graphql - updateDocument",
            "DELETE /graphql - deleteDocument"
          ]
        },
        "database": {
          "tables": ["documents", "document_templates", "document_history"],
          "relations": ["contractors", "users"]
        }
      },
      {
        "name": "gis-analytics",
        "title": "ГИС-аналитика",
        "description": "Геоинформационная аналитика контрагентов",
        "priority": "medium",
        "status": "planned",
        "dependencies": ["contractor-management", "postgis"],
        "api": {
          "endpoints": [
            "GET /graphql - getContractorLocations",
            "GET /graphql - getAnalyticsByRegion",
            "POST /graphql - createMapView"
          ]
        },
        "database": {
          "tables": ["contractor_locations", "regions", "analytics_cache"],
          "relations": ["contractors"]
        }
      }
    ],
    "database": {
      "schema": "fepro",
      "version": "1.0.0",
      "engine": "PostgreSQL 16",
      "extensions": ["PostGIS", "uuid-ossp", "pg_trgm"],
      "tables": [
        {
          "name": "contractors",
          "description": "Таблица контрагентов",
          "columns": [
            {"name": "id", "type": "UUID", "constraints": "PRIMARY KEY DEFAULT gen_random_uuid()"},
            {"name": "name", "type": "VARCHAR(255)", "constraints": "NOT NULL"},
            {"name": "legal_name", "type": "VARCHAR(255)", "constraints": "NULL"},
            {"name": "inn", "type": "VARCHAR(12)", "constraints": "UNIQUE NULL"},
            {"name": "kpp", "type": "VARCHAR(9)", "constraints": "NULL"},
            {"name": "email", "type": "VARCHAR(255)", "constraints": "NULL"},
            {"name": "phone", "type": "VARCHAR(50)", "constraints": "NULL"},
            {"name": "address", "type": "TEXT", "constraints": "NULL"},
            {"name": "coordinates", "type": "GEOMETRY(POINT, 4326)", "constraints": "NULL"},
            {"name": "status", "type": "VARCHAR(50)", "constraints": "NOT NULL DEFAULT 'active'"},
            {"name": "created_at", "type": "TIMESTAMP", "constraints": "NOT NULL DEFAULT NOW()"},
            {"name": "updated_at", "type": "TIMESTAMP", "constraints": "NOT NULL DEFAULT NOW()"}
          ],
          "indexes": [
            {"name": "idx_contractors_inn", "columns": ["inn"], "type": "UNIQUE"},
            {"name": "idx_contractors_coordinates", "columns": ["coordinates"], "type": "GIST"},
            {"name": "idx_contractors_status", "columns": ["status"], "type": "BTREE"},
            {"name": "idx_contractors_name", "columns": ["name"], "type": "BTREE"}
          ]
        },
        {
          "name": "users",
          "description": "Таблица пользователей системы",
          "columns": [
            {"name": "id", "type": "UUID", "constraints": "PRIMARY KEY DEFAULT gen_random_uuid()"},
            {"name": "username", "type": "VARCHAR(100)", "constraints": "UNIQUE NOT NULL"},
            {"name": "email", "type": "VARCHAR(255)", "constraints": "UNIQUE NOT NULL"},
            {"name": "password_hash", "type": "VARCHAR(255)", "constraints": "NOT NULL"},
            {"name": "first_name", "type": "VARCHAR(100)", "constraints": "NULL"},
            {"name": "last_name", "type": "VARCHAR(100)", "constraints": "NULL"},
            {"name": "role", "type": "VARCHAR(50)", "constraints": "NOT NULL DEFAULT 'USER'"},
            {"name": "is_active", "type": "BOOLEAN", "constraints": "NOT NULL DEFAULT true"},
            {"name": "created_at", "type": "TIMESTAMP", "constraints": "NOT NULL DEFAULT NOW()"},
            {"name": "updated_at", "type": "TIMESTAMP", "constraints": "NOT NULL DEFAULT NOW()"}
          ],
          "indexes": [
            {"name": "idx_users_username", "columns": ["username"], "type": "UNIQUE"},
            {"name": "idx_users_email", "columns": ["email"], "type": "UNIQUE"},
            {"name": "idx_users_role", "columns": ["role"], "type": "BTREE"}
          ]
        }
      ],
      "migrations": [
        {
          "version": "001",
          "description": "Initial schema creation",
          "file": "001-initial-schema.xml",
          "status": "planned",
          "changes": [
            "Create contractors table",
            "Create users table",
            "Create basic indexes"
          ]
        },
        {
          "version": "002",
          "description": "Add PostGIS support",
          "file": "002-add-postgis.xml",
          "status": "planned",
          "changes": [
            "Enable PostGIS extension",
            "Add spatial indexes",
            "Create regions table"
          ]
        }
      ]
    },
    "development": {
      "setup": {
        "prerequisites": [
          "Java 21 LTS",
          "Node.js 20+",
          "PostgreSQL 16",
          "Docker",
          "Maven 3.9+",
          "Git"
        ],
        "scripts": {
          "dev": "mvn spring-boot:run",
          "frontend": "npm run dev",
          "build": "mvn clean package",
          "test": "mvn test",
          "migrate": "mvn liquibase:update",
          "docker:up": "docker-compose up -d",
          "docker:down": "docker-compose down"
        },
        "environment": {
          "development": {
            "database_url": "postgresql://fepro_user:fepro_pass@localhost:5432/fepro_dev",
            "redis_url": "redis://localhost:6379",
            "backend_port": "8082",
            "frontend_port": "3000"
          }
        }
      },
      "standards": {
        "codeStyle": "Google Java Style + ESLint/Prettier",
        "gitFlow": "GitHub Flow",
        "testing": "JUnit 5 + Vue Test Utils",
        "documentation": "JSON + Markdown",
        "api": "GraphQL-first",
        "security": "JWT + RBAC"
      }
    },
    "deployment": {
      "environments": {
        "development": {
          "database": "localhost:5432/fepro_dev",
          "frontend": "http://localhost:3000",
          "backend": "http://localhost:8082",
          "cache": "localhost:6379",
          "docker": true
        },
        "staging": {
          "database": "staging-db:5432/fepro_staging",
          "frontend": "https://staging.fepro.app",
          "backend": "https://api-staging.fepro.app",
          "cache": "staging-redis:6379",
          "docker": true
        },
        "production": {
          "database": "prod-db:5432/fepro_prod",
          "frontend": "https://fepro.app",
          "backend": "https://api.fepro.app",
          "cache": "prod-redis:6379",
          "docker": true,
          "ssl": true
        }
      },
      "docker": {
        "services": ["postgres", "redis", "backend", "frontend"],
        "compose": "docker-compose.yml",
        "volumes": ["postgres_data", "redis_data"],
        "networks": ["fepro_network"]
      }
    },
    "timeline": {
      "phases": [
        {
          "name": "Phase 1: Foundation",
          "duration": "2 weeks",
          "startDate": "2025-01-02",
          "tasks": [
            "Настройка инфраструктуры",
            "Базовая архитектура Backend",
            "Базовая архитектура Frontend",
            "Настройка БД и миграций",
            "Создание JSON-документации"
          ],
          "status": "in_progress",
          "progress": 40
        },
        {
          "name": "Phase 2: Core Features",
          "duration": "4 weeks",
          "startDate": "2025-01-16",
          "tasks": [
            "Модуль управления контрагентами",
            "Система аутентификации",
            "Базовый UI/UX",
            "API интеграция Frontend-Backend"
          ],
          "status": "planned",
          "progress": 0
        },
        {
          "name": "Phase 3: Advanced Features",
          "duration": "3 weeks",
          "startDate": "2025-02-13",
          "tasks": [
            "ГИС-аналитика",
            "Документооборот",
            "Система уведомлений",
            "Интеграции с внешними API"
          ],
          "status": "planned",
          "progress": 0
        }
      ]
    },
    "risks": [
      {
        "id": "R001",
        "description": "Сложность интеграции с внешними API",
        "probability": "medium",
        "impact": "high",
        "mitigation": "Поэтапная интеграция с тестированием",
        "status": "monitoring"
      },
      {
        "id": "R002",
        "description": "Производительность при работе с большими объемами данных",
        "probability": "low",
        "impact": "medium",
        "mitigation": "Оптимизация запросов и кэширование",
        "status": "monitoring"
      }
    ],
    "resources": {
      "team": [
        {
          "role": "Full-stack Developer",
          "name": "Александр",
          "responsibilities": ["Backend", "Frontend", "DevOps", "Database", "Architecture"],
          "skills": ["Java", "Vue.js", "PostgreSQL", "Docker", "GraphQL"]
        }
      ],
      "budget": {
        "development": "0 (open-source)",
        "hosting": "estimated $50/month",
        "tools": "0 (free tools)",
        "total": "estimated $50/month"
      },
      "tools": [
        "IntelliJ IDEA Community",
        "VS Code / Cursor",
        "Docker Desktop",
        "Postman",
        "GitHub"
      ]
    }
  }
}